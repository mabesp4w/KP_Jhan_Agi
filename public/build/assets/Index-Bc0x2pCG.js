import{r as m,j as e,H as b,L as o,a as c,z as v}from"./app-CUYYQlw6.js";import{u as N,P as S,S as y,a as C,T as w,C as D}from"./useFlashToast-D_mIPSpE.js";import{B as h,C as x,a as u,b as T,c as K}from"./Button-zuUTB9pY.js";import{A,a as _}from"./AdminLayout-Bluj9bkD.js";function H({kepseks:l,sekolahs:i,filters:s}){N();const[n,r]=m.useState(null),[j,d]=m.useState(!1),p=a=>{r(a),d(!0)},k=()=>{if(n){const a=typeof route=="function"&&route("admin.kepsek.destroy",n)&&route("admin.kepsek.destroy",n)!=="#"||`/admin/kepsek/${n}`;c.delete(a,{preserveScroll:!0,onSuccess:()=>{d(!1),r(null)},onError:()=>{v.error("Gagal menghapus kepala sekolah")}})}},f=a=>a?e.jsx("span",{className:"badge badge-success badge-sm",children:"Aktif"}):e.jsx("span",{className:"badge badge-error badge-sm",children:"Tidak Aktif"}),g=a=>a==="L"?"Laki-laki":a==="P"?"Perempuan":"-";return e.jsxs(A,{title:"Kelola Kepala Sekolah",children:[e.jsx(b,{title:"Kelola Kepala Sekolah"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Data Kepala Sekolah"}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Kelola data kepala sekolah"})]}),e.jsx(o,{href:typeof route=="function"&&route("admin.kepsek.create")&&route("admin.kepsek.create")!=="#"||"/admin/kepsek/create",children:e.jsxs(h,{variant:"primary",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Tambah Kepala Sekolah"]})})]}),e.jsx(y,{placeholder:"Cari kepala sekolah (nama, NIP, sekolah, dll)...",searchUrl:typeof route=="function"&&route("admin.kepsek.index")&&route("admin.kepsek.index")!=="#"||"/admin/kepsek",resetUrl:typeof route=="function"&&route("admin.kepsek.index")&&route("admin.kepsek.index")!=="#"||"/admin/kepsek",defaultValue:s?.search||""}),e.jsx(x,{className:"mb-6",children:e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i&&i.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Sekolah:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.sekolah||"",onChange:a=>{const t=typeof route=="function"&&route("admin.kepsek.index")&&route("admin.kepsek.index")!=="#"||"/admin/kepsek";c.get(t,{...s,sekolah:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Sekolah"}),i.map(a=>e.jsx("option",{value:a.id,children:a.nm_sekolah},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Status:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.aktif!==void 0?String(s.aktif):"",onChange:a=>{const t=typeof route=="function"&&route("admin.kepsek.index")&&route("admin.kepsek.index")!=="#"||"/admin/kepsek";c.get(t,{...s,aktif:a.target.value!==""?a.target.value:null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"1",children:"Aktif"}),e.jsx("option",{value:"0",children:"Tidak Aktif"})]})]})]})})}),e.jsxs(x,{children:[e.jsx(T,{children:e.jsx(K,{children:"Daftar Kepala Sekolah"})}),e.jsxs(u,{children:[l.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(_,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:s?.search||s?.sekolah||s?.aktif!==void 0?"Tidak ada kepala sekolah yang ditemukan.":"Belum ada data kepala sekolah."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nama"}),e.jsx("th",{children:"NIP"}),e.jsx("th",{children:"Sekolah"}),e.jsx("th",{children:"Jenis Kelamin"}),e.jsx("th",{children:"Tanggal Mulai"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l.data.map((a,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:l.from+t}),e.jsx("td",{children:e.jsx("div",{className:"font-semibold",children:a.nm_kepsek})}),e.jsx("td",{children:e.jsx("div",{className:"text-sm",children:a.nip||"-"})}),e.jsx("td",{children:e.jsxs("div",{className:"text-sm",children:[a.sekolah?.nm_sekolah||"-",a.sekolah?.npsn&&e.jsxs("div",{className:"text-xs text-base-content/70",children:["NPSN: ",a.sekolah.npsn]})]})}),e.jsx("td",{children:e.jsx("div",{className:"text-sm",children:g(a.jenis_kelamin)})}),e.jsx("td",{children:e.jsx("div",{className:"text-sm",children:a.tgl_mulai?new Date(a.tgl_mulai).toLocaleDateString("id-ID"):"-"})}),e.jsx("td",{children:f(a.aktif)}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{href:typeof route=="function"&&route("admin.kepsek.edit",a.id)&&route("admin.kepsek.edit",a.id)!=="#"||`/admin/kepsek/${a.id}/edit`,children:e.jsx(h,{variant:"ghost",size:"sm",className:"btn-sm",children:e.jsx(C,{className:"h-4 w-4"})})}),e.jsx(h,{variant:"ghost",size:"sm",className:"text-error btn-sm hover:bg-error/10",onClick:()=>p(a.id),children:e.jsx(w,{className:"h-4 w-4"})})]})})]},a.id))})]})}),l.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("div",{className:"join",children:l.links.map((a,t)=>e.jsx(o,{href:a.url||"#",className:`btn join-item btn-sm ${a.active?"btn-active":a.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:a.label}},t))})})]})]})]}),e.jsx(D,{isOpen:j,onClose:()=>{d(!1),r(null)},onConfirm:k,title:"Hapus Kepala Sekolah",message:"Apakah Anda yakin ingin menghapus kepala sekolah ini? Tindakan ini tidak dapat dibatalkan.",confirmText:"Hapus",cancelText:"Batal",variant:"error"})]})}export{H as default};
