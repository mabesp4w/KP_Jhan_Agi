import{r as h,j as e,H as g,L as c,b as d,z as v}from"./app-C88MIY-H.js";import{u as N,S,T as y,C as A}from"./useFlashToast-DnOwylvI.js";import{B as m}from"./Button-8nhp7S0K.js";import{C as x,a as u,b as C,c as w}from"./Card-BVp4NdL4.js";import{S as B}from"./SearchBox-I81DX2Fg.js";import{u as T}from"./useAOS-BUJ55qhT.js";import{A as _}from"./AdminLayout-DC6RaOw9.js";import{P as D}from"./plus-UwCQ-z-K.js";import{S as H}from"./x-S739Wblq.js";import"./createLucideIcon-D5u0KSCq.js";import"./map-pin-DGNB9d2n.js";import"./users-CG4YSqGz.js";import"./graduation-cap-BadrOtYG.js";function R({sekolahs:l,kelurahans:i,filters:t}){N(),T();const[n,r]=h.useState(null),[j,o]=h.useState(!1),p=a=>{r(a),o(!0)},k=()=>{if(n){const a=typeof route=="function"&&route("admin.sekolah.destroy",n)&&route("admin.sekolah.destroy",n)!=="#"||`/admin/sekolah/${n}`;d.delete(a,{preserveScroll:!0,onSuccess:()=>{o(!1),r(null)},onError:()=>{v.error("Gagal menghapus sekolah")}})}},f=a=>a==="aktif"?e.jsx("span",{className:"badge badge-success badge-sm",children:"Aktif"}):e.jsx("span",{className:"badge badge-error badge-sm",children:"Tidak Aktif"}),b=a=>{const s={A:"badge-success",B:"badge-info",C:"badge-warning",Belum:"badge-ghost"};return e.jsx("span",{className:`badge ${s[a]||"badge-ghost"} badge-sm`,children:a})};return e.jsxs(_,{title:"Kelola Sekolah",children:[e.jsx(g,{title:"Kelola Sekolah"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between","data-aos":"fade-down",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Data Sekolah"}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Kelola data sekolah"})]}),e.jsx(c,{href:typeof route=="function"&&route("admin.sekolah.create")&&route("admin.sekolah.create")!=="#"||"/admin/sekolah/create",children:e.jsxs(m,{variant:"primary",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Tambah Sekolah"]})})]}),e.jsx("div",{"data-aos":"fade-up","data-aos-delay":"100",children:e.jsx(B,{placeholder:"Cari sekolah (NPSN, nama, alamat, dll)...",searchUrl:typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah",resetUrl:typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah",defaultValue:t?.search||""})}),e.jsx(x,{className:"mb-6","data-aos":"fade-up","data-aos-delay":"150",children:e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[i&&i.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Kelurahan:"}),e.jsxs("select",{className:"select select-bordered w-full",value:t?.kelurahan||"",onChange:a=>{const s=typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah";d.get(s,{...t,kelurahan:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Kelurahan"}),i.map(a=>e.jsxs("option",{value:a.id,children:[a.nm_kelurahan," - ",a.kecamatan?.nm_kecamatan]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Status:"}),e.jsxs("select",{className:"select select-bordered w-full",value:t?.status||"",onChange:a=>{const s=typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah";d.get(s,{...t,status:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"aktif",children:"Aktif"}),e.jsx("option",{value:"tidak_aktif",children:"Tidak Aktif"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Akreditasi:"}),e.jsxs("select",{className:"select select-bordered w-full",value:t?.akreditasi||"",onChange:a=>{const s=typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah";d.get(s,{...t,akreditasi:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Akreditasi"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"Belum",children:"Belum"})]})]})]})})}),e.jsxs(x,{"data-aos":"fade-up","data-aos-delay":"200",children:[e.jsx(C,{children:e.jsx(w,{children:"Daftar Sekolah"})}),e.jsxs(u,{children:[l.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(H,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:t?.search||t?.kelurahan||t?.status||t?.akreditasi?"Tidak ada sekolah yang ditemukan.":"Belum ada data sekolah."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"NPSN"}),e.jsx("th",{children:"Nama Sekolah"}),e.jsx("th",{children:"Kelurahan"}),e.jsx("th",{children:"Alamat"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Akreditasi"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l.data.map((a,s)=>e.jsxs("tr",{"data-aos":"fade-in","data-aos-delay":300+s*50,children:[e.jsx("td",{children:l.from+s}),e.jsx("td",{children:e.jsx("div",{className:"font-mono text-sm",children:a.npsn})}),e.jsx("td",{children:e.jsx("div",{className:"font-semibold",children:a.nm_sekolah})}),e.jsx("td",{children:e.jsxs("div",{className:"text-sm",children:[a.kelurahan?.nm_kelurahan||"-",a.kelurahan?.kecamatan&&e.jsx("div",{className:"text-xs text-base-content/70",children:a.kelurahan.kecamatan.nm_kecamatan})]})}),e.jsx("td",{children:e.jsx("div",{className:"max-w-xs truncate text-sm",children:a.alamat})}),e.jsx("td",{children:f(a.status_sekolah)}),e.jsx("td",{children:b(a.akreditasi)}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{href:typeof route=="function"&&route("admin.sekolah.edit",a.id)&&route("admin.sekolah.edit",a.id)!=="#"||`/admin/sekolah/${a.id}/edit`,children:e.jsx(m,{variant:"ghost",size:"sm",className:"btn-sm",children:e.jsx(S,{className:"h-4 w-4"})})}),e.jsx(m,{variant:"ghost",size:"sm",className:"text-error btn-sm hover:bg-error/10",onClick:()=>p(a.id),children:e.jsx(y,{className:"h-4 w-4"})})]})})]},a.id))})]})}),l.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("div",{className:"join",children:l.links.map((a,s)=>e.jsx(c,{href:a.url||"#",className:`btn join-item btn-sm ${a.active?"btn-active":a.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:a.label}},s))})})]})]})]}),e.jsx(A,{isOpen:j,onClose:()=>{o(!1),r(null)},onConfirm:k,title:"Hapus Sekolah",message:"Apakah Anda yakin ingin menghapus sekolah ini? Tindakan ini tidak dapat dibatalkan.",confirmText:"Hapus",cancelText:"Batal",variant:"error"})]})}export{R as default};
