import{r,j as e,H as T,L as u,b as o,z as L}from"./app-C88MIY-H.js";import{u as I,S as _,T as G,C as D}from"./useFlashToast-DnOwylvI.js";import{B as x}from"./Button-8nhp7S0K.js";import{C as g,a as p,b as K,c as B}from"./Card-BVp4NdL4.js";import{S as H}from"./SearchBox-I81DX2Fg.js";import{u as P}from"./useAOS-BUJ55qhT.js";import{A as U}from"./AdminLayout-DC6RaOw9.js";import{L as $}from"./index-CorsQIbR.js";/* empty css               */import{P as A}from"./plus-UwCQ-z-K.js";import{I as z}from"./x-S739Wblq.js";import"./createLucideIcon-D5u0KSCq.js";import"./map-pin-DGNB9d2n.js";import"./users-CG4YSqGz.js";import"./graduation-cap-BadrOtYG.js";function te({galeris:l,sekolahs:d,filters:s}){I(),P();const[n,c]=r.useState(null),[j,m]=r.useState(!1),[f,h]=r.useState(!1),[b,v]=r.useState(0),N=a=>{c(a),m(!0)},k=()=>{if(n){const a=typeof route=="function"&&route("admin.galeri.destroy",n)&&route("admin.galeri.destroy",n)!=="#"||`/admin/galeri/${n}`;o.delete(a,{preserveScroll:!0,onSuccess:()=>{m(!1),c(null)},onError:()=>{L.error("Gagal menghapus galeri")}})}},y=a=>{const t={gedung:"badge-primary",kegiatan:"badge-info",prestasi:"badge-success",lainnya:"badge-ghost"},i={gedung:"Gedung",kegiatan:"Kegiatan",prestasi:"Prestasi",lainnya:"Lainnya"};return e.jsx("span",{className:`badge ${t[a]||"badge-ghost"} badge-sm`,children:i[a]||a})},S=l.data.filter(a=>a.file_foto).map(a=>({src:`/storage/${a.file_foto}`,alt:a.judul,title:a.judul,description:a.deskripsi||""})),w=a=>{let t=0;for(let i=0;i<=a;i++)if(l.data[i]?.file_foto){if(i===a)return t;t++}return 0},C=a=>{const t=w(a);v(t),h(!0)};return e.jsxs(U,{title:"Kelola Galeri",children:[e.jsx(T,{title:"Kelola Galeri"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Galeri"}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Kelola galeri foto sekolah"})]}),e.jsx(u,{href:typeof route=="function"&&route("admin.galeri.create")&&route("admin.galeri.create")!=="#"||"/admin/galeri/create",children:e.jsxs(x,{variant:"primary",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Tambah Galeri"]})})]}),e.jsx(H,{placeholder:"Cari galeri (judul, sekolah, dll)...",searchUrl:typeof route=="function"&&route("admin.galeri.index")&&route("admin.galeri.index")!=="#"||"/admin/galeri",resetUrl:typeof route=="function"&&route("admin.galeri.index")&&route("admin.galeri.index")!=="#"||"/admin/galeri",defaultValue:s?.search||""}),e.jsx(g,{className:"mb-6",children:e.jsx(p,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[d&&d.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Sekolah:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.sekolah||"",onChange:a=>{const t=typeof route=="function"&&route("admin.galeri.index")&&route("admin.galeri.index")!=="#"||"/admin/galeri";o.get(t,{...s,sekolah:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Sekolah"}),d.map(a=>e.jsx("option",{value:a.id,children:a.nm_sekolah},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Kategori:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.kategori||"",onChange:a=>{const t=typeof route=="function"&&route("admin.galeri.index")&&route("admin.galeri.index")!=="#"||"/admin/galeri";o.get(t,{...s,kategori:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Kategori"}),e.jsx("option",{value:"gedung",children:"Gedung"}),e.jsx("option",{value:"kegiatan",children:"Kegiatan"}),e.jsx("option",{value:"prestasi",children:"Prestasi"}),e.jsx("option",{value:"lainnya",children:"Lainnya"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Status:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.tampilkan!==void 0?String(s.tampilkan):"",onChange:a=>{const t=typeof route=="function"&&route("admin.galeri.index")&&route("admin.galeri.index")!=="#"||"/admin/galeri";o.get(t,{...s,tampilkan:a.target.value!==""?a.target.value:null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"1",children:"Tampilkan"}),e.jsx("option",{value:"0",children:"Tidak Tampilkan"})]})]})]})})}),e.jsxs(g,{children:[e.jsx(K,{children:e.jsx(B,{children:"Daftar Galeri"})}),e.jsxs(p,{children:[l.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(z,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:s?.search||s?.sekolah||s?.kategori||s?.tampilkan!==void 0?"Tidak ada galeri yang ditemukan.":"Belum ada data galeri."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:l.data.map((a,t)=>e.jsxs("div",{className:"card card-compact bg-base-100 shadow",children:[e.jsxs("figure",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:a.file_foto?`/storage/${a.file_foto}`:"/placeholder-image.jpg",alt:a.judul,className:"h-full w-full cursor-pointer object-cover transition-transform hover:scale-105",onClick:()=>C(t)}),!a.tampilkan&&e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx("span",{className:"badge badge-error badge-sm",children:"Tidak Tampil"})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:"card-title text-sm line-clamp-2",children:a.judul}),y(a.kategori)]}),e.jsx("p",{className:"text-xs text-base-content/70 line-clamp-2",children:a.deskripsi||"-"}),e.jsx("div",{className:"text-xs text-base-content/70",children:a.sekolah?.nm_sekolah||"-"}),e.jsxs("div",{className:"card-actions mt-2 justify-end",children:[e.jsx(u,{href:typeof route=="function"&&route("admin.galeri.edit",a.id)&&route("admin.galeri.edit",a.id)!=="#"||`/admin/galeri/${a.id}/edit`,children:e.jsx(x,{variant:"ghost",size:"sm",className:"btn-sm",children:e.jsx(_,{className:"h-4 w-4"})})}),e.jsx(x,{variant:"ghost",size:"sm",className:"text-error btn-sm hover:bg-error/10",onClick:()=>N(a.id),children:e.jsx(G,{className:"h-4 w-4"})})]})]})]},a.id))}),l.links.length>3&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("div",{className:"join",children:l.links.map((a,t)=>e.jsx(u,{href:a.url||"#",className:`btn join-item btn-sm ${a.active?"btn-active":a.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:a.label}},t))})})]})]})]}),e.jsx($,{open:f,close:()=>h(!1),index:b,slides:S,render:{buttonPrev:()=>null,buttonNext:()=>null}}),e.jsx(D,{isOpen:j,onClose:()=>{m(!1),c(null)},onConfirm:k,title:"Hapus Galeri",message:"Apakah Anda yakin ingin menghapus galeri ini? Tindakan ini tidak dapat dibatalkan.",confirmText:"Hapus",cancelText:"Batal",variant:"error"})]})}export{te as default};
