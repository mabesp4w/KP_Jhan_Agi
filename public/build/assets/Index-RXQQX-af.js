import{r as h,j as e,H as b,L as c,a as m,z as N}from"./app-CUYYQlw6.js";import{u as v,P as g,S as k,a as y,T as K,C as D}from"./useFlashToast-D_mIPSpE.js";import{B as o,C as x,a as u,b as w,c as C}from"./Button-zuUTB9pY.js";import{A as S,B as T}from"./AdminLayout-Bluj9bkD.js";function I({kelurahans:t,kecamatans:r,filters:s}){v();const[l,i]=h.useState(null),[j,d]=h.useState(!1),f=a=>{i(a),d(!0)},p=()=>{if(l){const a=typeof route=="function"&&route("admin.kelurahan.destroy",l)&&route("admin.kelurahan.destroy",l)!=="#"||`/admin/kelurahan/${l}`;m.delete(a,{preserveScroll:!0,onSuccess:()=>{d(!1),i(null)},onError:()=>{N.error("Gagal menghapus kelurahan")}})}};return e.jsxs(S,{title:"Kelola Kelurahan",children:[e.jsx(b,{title:"Kelola Kelurahan"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Data Kelurahan"}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Kelola data kelurahan"})]}),e.jsx(c,{href:typeof route=="function"&&route("admin.kelurahan.create")&&route("admin.kelurahan.create")!=="#"||"/admin/kelurahan/create",children:e.jsxs(o,{variant:"primary",children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Tambah Kelurahan"]})})]}),e.jsx(k,{placeholder:"Cari kelurahan...",searchUrl:typeof route=="function"&&route("admin.kelurahan.index")&&route("admin.kelurahan.index")!=="#"||"/admin/kelurahan",resetUrl:typeof route=="function"&&route("admin.kelurahan.index")&&route("admin.kelurahan.index")!=="#"||"/admin/kelurahan",defaultValue:s?.search||""}),r&&r.length>0&&e.jsx(x,{className:"mb-6",children:e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"label-text",children:"Filter Kecamatan:"}),e.jsxs("select",{className:"select select-bordered",value:s?.kecamatan||"",onChange:a=>{const n=typeof route=="function"&&route("admin.kelurahan.index")&&route("admin.kelurahan.index")!=="#"||"/admin/kelurahan";m.get(n,{...s,kecamatan:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Kecamatan"}),r.map(a=>e.jsx("option",{value:a.id,children:a.nm_kecamatan},a.id))]})]})})}),e.jsxs(x,{children:[e.jsx(w,{children:e.jsx(C,{children:"Daftar Kelurahan"})}),e.jsxs(u,{children:[t.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(T,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:s?.search||s?.kecamatan?"Tidak ada kelurahan yang ditemukan.":"Belum ada data kelurahan."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nama Kelurahan"}),e.jsx("th",{children:"Kecamatan"}),e.jsx("th",{children:"Kode Pos"}),e.jsx("th",{children:"Keterangan"}),e.jsx("th",{children:"Tanggal Dibuat"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:t.data.map((a,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.from+n}),e.jsx("td",{children:e.jsx("div",{className:"font-semibold",children:a.nm_kelurahan})}),e.jsx("td",{children:e.jsx("div",{className:"text-sm",children:a.kecamatan?.nm_kecamatan||"-"})}),e.jsx("td",{children:e.jsx("div",{className:"text-sm",children:a.kode_pos||"-"})}),e.jsx("td",{children:e.jsx("div",{className:"max-w-xs truncate text-sm text-base-content/70",children:a.ket||"-"})}),e.jsx("td",{children:e.jsx("div",{className:"text-sm text-base-content/70",children:new Date(a.created_at).toLocaleDateString("id-ID")})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{href:typeof route=="function"&&route("admin.kelurahan.edit",a.id)&&route("admin.kelurahan.edit",a.id)!=="#"||`/admin/kelurahan/${a.id}/edit`,children:e.jsx(o,{variant:"ghost",size:"sm",className:"btn-sm",children:e.jsx(y,{className:"h-4 w-4"})})}),e.jsx(o,{variant:"ghost",size:"sm",className:"text-error btn-sm hover:bg-error/10",onClick:()=>f(a.id),children:e.jsx(K,{className:"h-4 w-4"})})]})})]},a.id))})]})}),t.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("div",{className:"join",children:t.links.map((a,n)=>e.jsx(c,{href:a.url||"#",className:`btn join-item btn-sm ${a.active?"btn-active":a.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:a.label}},n))})})]})]})]}),e.jsx(D,{isOpen:j,onClose:()=>{d(!1),i(null)},onConfirm:p,title:"Hapus Kelurahan",message:"Apakah Anda yakin ingin menghapus kelurahan ini? Tindakan ini tidak dapat dibatalkan.",confirmText:"Hapus",cancelText:"Batal",variant:"error"})]})}export{I as default};
