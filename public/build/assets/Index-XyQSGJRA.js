import{r as x,j as e,H as b,L as c,b as m,z as _}from"./app-C88MIY-H.js";import{u as N,S as T,T as S,C as K}from"./useFlashToast-DnOwylvI.js";import{B as h}from"./Button-8nhp7S0K.js";import{C as u,a as j,b as y,c as G}from"./Card-BVp4NdL4.js";import{S as D}from"./SearchBox-I81DX2Fg.js";import{T as C}from"./TahunAjaranSelect-Cc6Qdf2e.js";import{u as w}from"./useAOS-BUJ55qhT.js";import{A}from"./AdminLayout-DC6RaOw9.js";import{P as H}from"./plus-UwCQ-z-K.js";import{G as P}from"./graduation-cap-BadrOtYG.js";import"./createLucideIcon-D5u0KSCq.js";import"./map-pin-DGNB9d2n.js";import"./users-CG4YSqGz.js";import"./x-S739Wblq.js";function Q({dataGtks:r,sekolahs:i,filters:s}){N(),w();const[l,d]=x.useState(null),[k,o]=x.useState(!1),p=a=>{d(a),o(!0)},g=()=>{if(l){const a=typeof route=="function"&&route("admin.data-gtk.destroy",l)&&route("admin.data-gtk.destroy",l)!=="#"||`/admin/data-gtk/${l}`;m.delete(a,{preserveScroll:!0,onSuccess:()=>{o(!1),d(null)},onError:()=>{_.error("Gagal menghapus data GTK")}})}},f=a=>{const t=a.jml_guru_pns+a.jml_guru_honor+a.jml_guru_kontrak,n=a.jml_tendik_pns+a.jml_tendik_honor+a.jml_tendik_kontrak,v=t+n;return{totalGuru:t,totalTendik:n,totalGTK:v}};return e.jsxs(A,{title:"Kelola Data GTK",children:[e.jsx(b,{title:"Kelola Data GTK"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Data GTK"}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Kelola data Guru dan Tenaga Kependidikan per sekolah dan tahun ajaran"})]}),e.jsx(c,{href:typeof route=="function"&&route("admin.data-gtk.create")&&route("admin.data-gtk.create")!=="#"||"/admin/data-gtk/create",children:e.jsxs(h,{variant:"primary",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Tambah Data GTK"]})})]}),e.jsx(D,{placeholder:"Cari data GTK (sekolah, tahun ajaran)...",searchUrl:typeof route=="function"&&route("admin.data-gtk.index")&&route("admin.data-gtk.index")!=="#"||"/admin/data-gtk",resetUrl:typeof route=="function"&&route("admin.data-gtk.index")&&route("admin.data-gtk.index")!=="#"||"/admin/data-gtk",defaultValue:s?.search||""}),e.jsx(u,{className:"mb-6",children:e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i&&i.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Sekolah:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.sekolah||"",onChange:a=>{const t=typeof route=="function"&&route("admin.data-gtk.index")&&route("admin.data-gtk.index")!=="#"||"/admin/data-gtk";m.get(t,{...s,sekolah:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Sekolah"}),i.map(a=>e.jsx("option",{value:a.id,children:a.nm_sekolah},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Tahun Ajaran:"}),e.jsx(C,{value:s?.thn_ajaran||"",onChange:a=>{const t=typeof route=="function"&&route("admin.data-gtk.index")&&route("admin.data-gtk.index")!=="#"||"/admin/data-gtk";m.get(t,{...s,thn_ajaran:a||null},{preserveState:!0})},required:!1,showPlaceholder:!0})]})]})})}),e.jsxs(u,{children:[e.jsx(y,{children:e.jsx(G,{children:"Daftar Data GTK"})}),e.jsxs(j,{children:[r.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(P,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:s?.search||s?.sekolah||s?.thn_ajaran?"Tidak ada data GTK yang ditemukan.":"Belum ada data GTK."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Sekolah"}),e.jsx("th",{children:"Tahun Ajaran"}),e.jsx("th",{children:"Guru"}),e.jsx("th",{children:"Tenaga Kependidikan"}),e.jsx("th",{children:"Total GTK"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:r.data.map((a,t)=>{const n=f(a);return e.jsxs("tr",{children:[e.jsx("td",{children:r.from+t}),e.jsxs("td",{children:[e.jsx("div",{className:"font-semibold",children:a.sekolah?.nm_sekolah||"-"}),a.sekolah?.npsn&&e.jsxs("div",{className:"text-xs text-base-content/70",children:["NPSN: ",a.sekolah.npsn]})]}),e.jsx("td",{children:e.jsx("div",{className:"font-semibold",children:a.thn_ajaran})}),e.jsx("td",{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:["PNS: ",a.jml_guru_pns]}),e.jsxs("div",{children:["Honor: ",a.jml_guru_honor]}),e.jsxs("div",{children:["Kontrak: ",a.jml_guru_kontrak]}),e.jsxs("div",{className:"mt-1 border-t pt-1",children:[e.jsxs("div",{children:["S1: ",a.jml_guru_s1]}),e.jsxs("div",{children:["S2: ",a.jml_guru_s2]}),e.jsxs("div",{children:["Sertifikasi: ",a.jml_guru_sertifikasi]})]}),e.jsxs("div",{className:"mt-1 font-semibold border-t pt-1",children:["Total: ",n.totalGuru]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:["PNS: ",a.jml_tendik_pns]}),e.jsxs("div",{children:["Honor: ",a.jml_tendik_honor]}),e.jsxs("div",{children:["Kontrak: ",a.jml_tendik_kontrak]}),e.jsxs("div",{className:"mt-1 font-semibold border-t pt-1",children:["Total: ",n.totalTendik]})]})}),e.jsx("td",{children:e.jsx("div",{className:"text-base font-semibold",children:n.totalGTK})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{href:typeof route=="function"&&route("admin.data-gtk.edit",a.id)&&route("admin.data-gtk.edit",a.id)!=="#"||`/admin/data-gtk/${a.id}/edit`,children:e.jsx(h,{variant:"ghost",size:"sm",className:"btn-sm",children:e.jsx(T,{className:"h-4 w-4"})})}),e.jsx(h,{variant:"ghost",size:"sm",className:"text-error btn-sm hover:bg-error/10",onClick:()=>p(a.id),children:e.jsx(S,{className:"h-4 w-4"})})]})})]},a.id)})})]})}),r.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("div",{className:"join",children:r.links.map((a,t)=>e.jsx(c,{href:a.url||"#",className:`btn join-item btn-sm ${a.active?"btn-active":a.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:a.label}},t))})})]})]})]}),e.jsx(K,{isOpen:k,onClose:()=>{o(!1),d(null)},onConfirm:g,title:"Hapus Data GTK",message:"Apakah Anda yakin ingin menghapus data GTK ini? Tindakan ini tidak dapat dibatalkan.",confirmText:"Hapus",cancelText:"Batal",variant:"error"})]})}export{Q as default};
