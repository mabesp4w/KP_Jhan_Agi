import{r as m,j as e,H as f,L as c,a as i,z as v}from"./app-CUYYQlw6.js";import{u as N,P as S,S as y,a as A,T as C,C as w}from"./useFlashToast-D_mIPSpE.js";import{B as h,C as x,a as u,b as B,c as T}from"./Button-zuUTB9pY.js";import{A as _,S as D}from"./AdminLayout-Bluj9bkD.js";function z({sekolahs:l,kelurahans:r,filters:s}){N();const[n,d]=m.useState(null),[j,o]=m.useState(!1),k=a=>{d(a),o(!0)},b=()=>{if(n){const a=typeof route=="function"&&route("admin.sekolah.destroy",n)&&route("admin.sekolah.destroy",n)!=="#"||`/admin/sekolah/${n}`;i.delete(a,{preserveScroll:!0,onSuccess:()=>{o(!1),d(null)},onError:()=>{v.error("Gagal menghapus sekolah")}})}},g=a=>a==="aktif"?e.jsx("span",{className:"badge badge-success badge-sm",children:"Aktif"}):e.jsx("span",{className:"badge badge-error badge-sm",children:"Tidak Aktif"}),p=a=>{const t={A:"badge-success",B:"badge-info",C:"badge-warning",Belum:"badge-ghost"};return e.jsx("span",{className:`badge ${t[a]||"badge-ghost"} badge-sm`,children:a})};return e.jsxs(_,{title:"Kelola Sekolah",children:[e.jsx(f,{title:"Kelola Sekolah"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Data Sekolah"}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Kelola data sekolah"})]}),e.jsx(c,{href:typeof route=="function"&&route("admin.sekolah.create")&&route("admin.sekolah.create")!=="#"||"/admin/sekolah/create",children:e.jsxs(h,{variant:"primary",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Tambah Sekolah"]})})]}),e.jsx(y,{placeholder:"Cari sekolah (NPSN, nama, alamat, dll)...",searchUrl:typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah",resetUrl:typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah",defaultValue:s?.search||""}),e.jsx(x,{className:"mb-6",children:e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[r&&r.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Kelurahan:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.kelurahan||"",onChange:a=>{const t=typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah";i.get(t,{...s,kelurahan:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Kelurahan"}),r.map(a=>e.jsxs("option",{value:a.id,children:[a.nm_kelurahan," - ",a.kecamatan?.nm_kecamatan]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Status:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.status||"",onChange:a=>{const t=typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah";i.get(t,{...s,status:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"aktif",children:"Aktif"}),e.jsx("option",{value:"tidak_aktif",children:"Tidak Aktif"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Akreditasi:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.akreditasi||"",onChange:a=>{const t=typeof route=="function"&&route("admin.sekolah.index")&&route("admin.sekolah.index")!=="#"||"/admin/sekolah";i.get(t,{...s,akreditasi:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Akreditasi"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"Belum",children:"Belum"})]})]})]})})}),e.jsxs(x,{children:[e.jsx(B,{children:e.jsx(T,{children:"Daftar Sekolah"})}),e.jsxs(u,{children:[l.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(D,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:s?.search||s?.kelurahan||s?.status||s?.akreditasi?"Tidak ada sekolah yang ditemukan.":"Belum ada data sekolah."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"NPSN"}),e.jsx("th",{children:"Nama Sekolah"}),e.jsx("th",{children:"Kelurahan"}),e.jsx("th",{children:"Alamat"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Akreditasi"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l.data.map((a,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:l.from+t}),e.jsx("td",{children:e.jsx("div",{className:"font-mono text-sm",children:a.npsn})}),e.jsx("td",{children:e.jsx("div",{className:"font-semibold",children:a.nm_sekolah})}),e.jsx("td",{children:e.jsxs("div",{className:"text-sm",children:[a.kelurahan?.nm_kelurahan||"-",a.kelurahan?.kecamatan&&e.jsx("div",{className:"text-xs text-base-content/70",children:a.kelurahan.kecamatan.nm_kecamatan})]})}),e.jsx("td",{children:e.jsx("div",{className:"max-w-xs truncate text-sm",children:a.alamat})}),e.jsx("td",{children:g(a.status_sekolah)}),e.jsx("td",{children:p(a.akreditasi)}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{href:typeof route=="function"&&route("admin.sekolah.edit",a.id)&&route("admin.sekolah.edit",a.id)!=="#"||`/admin/sekolah/${a.id}/edit`,children:e.jsx(h,{variant:"ghost",size:"sm",className:"btn-sm",children:e.jsx(A,{className:"h-4 w-4"})})}),e.jsx(h,{variant:"ghost",size:"sm",className:"text-error btn-sm hover:bg-error/10",onClick:()=>k(a.id),children:e.jsx(C,{className:"h-4 w-4"})})]})})]},a.id))})]})}),l.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("div",{className:"join",children:l.links.map((a,t)=>e.jsx(c,{href:a.url||"#",className:`btn join-item btn-sm ${a.active?"btn-active":a.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:a.label}},t))})})]})]})]}),e.jsx(w,{isOpen:j,onClose:()=>{o(!1),d(null)},onConfirm:b,title:"Hapus Sekolah",message:"Apakah Anda yakin ingin menghapus sekolah ini? Tindakan ini tidak dapat dibatalkan.",confirmText:"Hapus",cancelText:"Batal",variant:"error"})]})}export{z as default};
