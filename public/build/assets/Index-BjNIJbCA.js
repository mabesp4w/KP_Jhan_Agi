import{r as h,j as e,H as b,L as c,b as x,z as v}from"./app-9nS-Mm4e.js";import{u as N,S as y,T as k,C as K}from"./useFlashToast-C249PXxX.js";import{B as m}from"./Button-DtSZ5ZSY.js";import{C as u,a as f,b as D,c as S}from"./Card-gbBR4fyZ.js";import{S as w}from"./SearchBox-DlmGgGNR.js";import{u as C}from"./useAOS-Dj5LRxol.js";import{A as T}from"./AdminLayout-DPSUws_u.js";import{P as _}from"./plus-IeqsPJ_v.js";import{B}from"./users-DE606EQy.js";import"./createLucideIcon-oTywQYJd.js";import"./map-pin-D-MawlvD.js";import"./x-BqjMX6yR.js";import"./graduation-cap-8JamamWt.js";function M({kelurahans:r,kecamatans:l,filters:n}){N(),C();const[i,d]=h.useState(null),[j,o]=h.useState(!1),p=a=>{d(a),o(!0)},g=()=>{if(i){let a=`/admin/kelurahan/${i}`;if(typeof route=="function"){const t=route("admin.kelurahan.destroy",i);t&&typeof t=="string"&&t!=="#"&&(a=t)}x.delete(a,{preserveScroll:!0,onSuccess:()=>{o(!1),d(null)},onError:()=>{v.error("Gagal menghapus kelurahan")}})}};return e.jsxs(T,{title:"Kelola Kelurahan",children:[e.jsx(b,{title:"Kelola Kelurahan"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between","data-aos":"fade-down",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Data Kelurahan"}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Kelola data kelurahan"})]}),e.jsx(c,{href:(()=>{if(typeof route=="function"){const a=route("admin.kelurahan.create");if(a&&typeof a=="string"&&a!=="#")return a}return"/admin/kelurahan/create"})(),children:e.jsxs(m,{variant:"primary",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Tambah Kelurahan"]})})]}),e.jsx("div",{"data-aos":"fade-up","data-aos-delay":"100",children:e.jsx(w,{placeholder:"Cari kelurahan...",searchUrl:(()=>{if(typeof route=="function"){const a=route("admin.kelurahan.index");if(a&&typeof a=="string"&&a!=="#")return a}return"/admin/kelurahan"})(),resetUrl:(()=>{if(typeof route=="function"){const a=route("admin.kelurahan.index");if(a&&typeof a=="string"&&a!=="#")return a}return"/admin/kelurahan"})(),defaultValue:n?.search||""})}),l&&l.length>0&&e.jsx(u,{className:"mb-6","data-aos":"fade-up","data-aos-delay":"150",children:e.jsx(f,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"label-text",children:"Filter Kecamatan:"}),e.jsxs("select",{className:"select select-bordered",value:n?.kecamatan||"",onChange:a=>{let t="/admin/kelurahan";if(typeof route=="function"){const s=route("admin.kelurahan.index");s&&typeof s=="string"&&s!=="#"&&(t=s)}x.get(t,{...n,kecamatan:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Kecamatan"}),l.map(a=>e.jsx("option",{value:a.id,children:a.nm_kecamatan},a.id))]})]})})}),e.jsxs(u,{"data-aos":"fade-up","data-aos-delay":"200",children:[e.jsx(D,{children:e.jsx(S,{children:"Daftar Kelurahan"})}),e.jsxs(f,{children:[r.data.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(B,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:n?.search||n?.kecamatan?"Tidak ada kelurahan yang ditemukan.":"Belum ada data kelurahan."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nama Kelurahan"}),e.jsx("th",{children:"Kecamatan"}),e.jsx("th",{children:"Kode Pos"}),e.jsx("th",{children:"Keterangan"}),e.jsx("th",{children:"Tanggal Dibuat"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:r.data.map((a,t)=>e.jsxs("tr",{"data-aos":"fade-in","data-aos-delay":300+t*50,children:[e.jsx("td",{children:r.from+t}),e.jsx("td",{children:e.jsx("div",{className:"font-semibold",children:a.nm_kelurahan})}),e.jsx("td",{children:e.jsx("div",{className:"text-sm",children:a.kecamatan?.nm_kecamatan||"-"})}),e.jsx("td",{children:e.jsx("div",{className:"text-sm",children:a.kode_pos||"-"})}),e.jsx("td",{children:e.jsx("div",{className:"max-w-xs truncate text-sm text-base-content/70",children:a.ket||"-"})}),e.jsx("td",{children:e.jsx("div",{className:"text-sm text-base-content/70",children:new Date(a.created_at).toLocaleDateString("id-ID")})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{href:(()=>{if(typeof route=="function"){const s=route("admin.kelurahan.edit",a.id);if(s&&typeof s=="string"&&s!=="#")return s}return`/admin/kelurahan/${a.id}/edit`})(),children:e.jsx(m,{variant:"ghost",size:"sm",className:"btn-sm",children:e.jsx(y,{className:"h-4 w-4"})})}),e.jsx(m,{variant:"ghost",size:"sm",className:"text-error btn-sm hover:bg-error/10",onClick:()=>p(a.id),children:e.jsx(k,{className:"h-4 w-4"})})]})})]},a.id))})]})}),r.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("div",{className:"join",children:r.links.map((a,t)=>e.jsx(c,{href:a.url||"#",className:`btn join-item btn-sm ${a.active?"btn-active":a.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:a.label}},t))})})]})]})]}),e.jsx(K,{isOpen:j,onClose:()=>{o(!1),d(null)},onConfirm:g,title:"Hapus Kelurahan",message:"Apakah Anda yakin ingin menghapus kelurahan ini? Tindakan ini tidak dapat dibatalkan.",confirmText:"Hapus",cancelText:"Batal",variant:"error"})]})}export{M as default};
