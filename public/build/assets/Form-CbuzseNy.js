import{u as y,j as a,H as D,L as N,z as d}from"./app-9nS-Mm4e.js";import{A as C}from"./AdminLayout-DPSUws_u.js";import{C as u,b as h,c as x,a as p}from"./Card-gbBR4fyZ.js";import{B as w}from"./Button-DtSZ5ZSY.js";import{T as A}from"./TahunAjaranSelect-bKYOORGD.js";import{u as I}from"./useAOS-Dj5LRxol.js";import{A as S}from"./arrow-left-aaF1DPWt.js";import"./createLucideIcon-oTywQYJd.js";import"./map-pin-D-MawlvD.js";import"./users-DE606EQy.js";import"./x-BqjMX6yR.js";import"./graduation-cap-8JamamWt.js";function U({dataSiswa:l=null,sekolahs:k=[]}){I();const n=!!l,c=l?.id,{data:i,setData:m,post:f,put:g,processing:v,errors:e}=y({id_sekolah:l?.id_sekolah||"",thn_ajaran:l?.thn_ajaran||"",jml_kelas_7:l?.jml_kelas_7||0,jml_siswa_l_7:l?.jml_siswa_l_7||0,jml_siswa_p_7:l?.jml_siswa_p_7||0,jml_kelas_8:l?.jml_kelas_8||0,jml_siswa_l_8:l?.jml_siswa_l_8||0,jml_siswa_p_8:l?.jml_siswa_p_8||0,jml_kelas_9:l?.jml_kelas_9||0,jml_siswa_l_9:l?.jml_siswa_l_9||0,jml_siswa_p_9:l?.jml_siswa_p_9||0,ket:l?.ket||""}),$=r=>{if(r.preventDefault(),n){const s=typeof route=="function"&&route("admin.data-siswa.update",c)&&route("admin.data-siswa.update",c)!=="#"||`/admin/data-siswa/${c}`,t=d.loading("Memperbarui data siswa...",{duration:1/0});g(s,{preserveScroll:!1,onSuccess:()=>{d.dismiss(t)},onError:o=>{const _=o&&Object.keys(o).length>0?"Gagal memperbarui data siswa. Periksa form Anda.":"Gagal memperbarui data siswa";d.error(_,{id:t,duration:5e3})}})}else{const s=typeof route=="function"&&route("admin.data-siswa.store")&&route("admin.data-siswa.store")!=="#"||"/admin/data-siswa",t=d.loading("Menyimpan data siswa...",{duration:1/0});f(s,{preserveScroll:!1,onSuccess:()=>{d.dismiss(t)},onError:o=>{const _=o&&Object.keys(o).length>0?"Gagal menambahkan data siswa. Periksa form Anda.":"Gagal menambahkan data siswa";d.error(_,{id:t,duration:5e3})}})}},b=typeof route=="function"&&route("admin.data-siswa.index")&&route("admin.data-siswa.index")!=="#"||"/admin/data-siswa",j=(r,s)=>a.jsxs(u,{className:"mb-6",children:[a.jsx(h,{children:a.jsxs(x,{children:["Kelas ",r]})}),a.jsx(p,{children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[a.jsxs("div",{className:"form-control",children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text",children:["Jumlah Kelas ",a.jsx("span",{className:"text-error",children:"*"})]})}),a.jsx("input",{type:"number",min:"0",className:`input input-bordered w-full ${e[`jml_kelas_${s}`]?"input-error":""}`,value:i[`jml_kelas_${s}`],onChange:t=>m(`jml_kelas_${s}`,parseInt(t.target.value)||0),required:!0}),e[`jml_kelas_${s}`]&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:e[`jml_kelas_${s}`]})})]}),a.jsxs("div",{className:"form-control",children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text",children:["Siswa Laki-laki ",a.jsx("span",{className:"text-error",children:"*"})]})}),a.jsx("input",{type:"number",min:"0",className:`input input-bordered w-full ${e[`jml_siswa_l_${s}`]?"input-error":""}`,value:i[`jml_siswa_l_${s}`],onChange:t=>m(`jml_siswa_l_${s}`,parseInt(t.target.value)||0),required:!0}),e[`jml_siswa_l_${s}`]&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:e[`jml_siswa_l_${s}`]})})]}),a.jsxs("div",{className:"form-control",children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text",children:["Siswa Perempuan ",a.jsx("span",{className:"text-error",children:"*"})]})}),a.jsx("input",{type:"number",min:"0",className:`input input-bordered w-full ${e[`jml_siswa_p_${s}`]?"input-error":""}`,value:i[`jml_siswa_p_${s}`],onChange:t=>m(`jml_siswa_p_${s}`,parseInt(t.target.value)||0),required:!0}),e[`jml_siswa_p_${s}`]&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:e[`jml_siswa_p_${s}`]})})]})]})})]});return a.jsxs(C,{title:n?"Edit Data Siswa":"Tambah Data Siswa",children:[a.jsx(D,{title:n?"Edit Data Siswa":"Tambah Data Siswa"}),a.jsxs("div",{className:"mx-auto max-w-4xl",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs(N,{href:b,className:"mb-4 inline-flex items-center text-sm text-base-content/70 hover:text-base-content",children:[a.jsx(S,{className:"mr-2 h-4 w-4"}),"Kembali ke Daftar Data Siswa"]}),a.jsx("h2",{className:"text-2xl font-bold",children:n?"Edit Data Siswa":"Tambah Data Siswa Baru"}),a.jsx("p",{className:"text-sm text-base-content/70",children:n?"Perbarui data siswa":"Masukkan data siswa yang akan ditambahkan"})]}),a.jsxs("form",{onSubmit:$,children:[a.jsxs(u,{className:"mb-6",children:[a.jsx(h,{children:a.jsx(x,{children:"Informasi Dasar"})}),a.jsx(p,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"form-control",children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text",children:["Sekolah ",a.jsx("span",{className:"text-error",children:"*"})]})}),a.jsxs("select",{className:`select select-bordered w-full ${e.id_sekolah?"select-error":""}`,value:i.id_sekolah,onChange:r=>m("id_sekolah",r.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Pilih Sekolah"}),k.map(r=>a.jsxs("option",{value:r.id,children:[r.nm_sekolah," - ",r.npsn]},r.id))]}),e.id_sekolah&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:e.id_sekolah})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text",children:["Tahun Ajaran ",a.jsx("span",{className:"text-error",children:"*"})]})}),a.jsx(A,{value:i.thn_ajaran,onChange:r=>m("thn_ajaran",r),required:!0,errors:e,name:"thn_ajaran"})]})]})})]}),j(7,"7"),j(8,"8"),j(9,"9"),a.jsxs(u,{className:"mb-6",children:[a.jsx(h,{children:a.jsx(x,{children:"Keterangan"})}),a.jsx(p,{children:a.jsxs("div",{className:"form-control",children:[a.jsx("textarea",{rows:4,placeholder:"Masukkan keterangan tambahan (opsional)",className:`textarea textarea-bordered w-full ${e.ket?"textarea-error":""}`,value:i.ket,onChange:r=>m("ket",r.target.value)}),e.ket&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:e.ket})})]})})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(N,{href:b,children:a.jsx(w,{type:"button",variant:"outline",children:"Batal"})}),a.jsx(w,{type:"submit",variant:"primary",loading:v,children:n?"Perbarui":"Simpan"})]})]})]})]})}export{U as default};
