import{r as u,b as m,j as e,H as N,L as p}from"./app-C88MIY-H.js";import{U as v}from"./UserLayout-BylgULTI.js";import{C as o,a as x,b as f,c as w}from"./Card-BVp4NdL4.js";import{B as y}from"./Badge-YsTPM2vh.js";import{S}from"./SearchBox-I81DX2Fg.js";import{M as _,P as B,G as C,C as A}from"./MapView-cR3t6RFO.js";import{u as K}from"./useAOS-BUJ55qhT.js";import{M as j}from"./map-pin-DGNB9d2n.js";import{S as g}from"./x-S739Wblq.js";import{M}from"./mail-B_5wppTB.js";import{A as P}from"./award-t-gwmB1R.js";import"./log-in-n8tAZTeG.js";import"./createLucideIcon-D5u0KSCq.js";import"./Button-8nhp7S0K.js";import"./leaflet-_qZNW8_J.js";function q({sekolahs:i,kecamatans:h,kelurahans:r,filters:s,sekolahsForMap:d=[]}){K();const n=u.useMemo(()=>!s?.kecamatan||!r?r||[]:r.filter(a=>a.id_kecamatan==s.kecamatan),[s?.kecamatan,r]),k=u.useMemo(()=>!s?.kelurahan||!s?.kecamatan?!0:n.some(a=>a.id==s.kelurahan),[s?.kelurahan,s?.kecamatan,n]);u.useEffect(()=>{if(s?.kecamatan&&s?.kelurahan&&!k){const a={...s};delete a.kelurahan,m.get(l("user.sekolah.index","/sekolah"),a,{preserveState:!0,replace:!0})}},[s?.kecamatan]);const l=(a,t)=>{try{if(typeof route=="function"){const c=route(a);if(c&&c!=="#")return c}return t||"#"}catch{return t||"#"}},b=a=>{const t={A:"success",B:"info",C:"warning",Belum:"error"};return e.jsx(y,{variant:t[a]||"error",children:a||"Belum"})};return e.jsxs(v,{title:"Daftar Sekolah",children:[e.jsx(N,{title:"Daftar Sekolah - SIG SMP YPK Jayapura"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 text-center","data-aos":"fade-down",children:[e.jsx("h1",{className:"text-3xl font-bold text-base-content",children:"Daftar Sekolah"}),e.jsx("p",{className:"mt-2 text-base-content/70",children:"Temukan informasi lengkap tentang sekolah di daerah Anda"})]}),e.jsx("div",{className:"mb-6","data-aos":"fade-up","data-aos-delay":"100",children:e.jsx(S,{placeholder:"Cari sekolah (NPSN, nama, alamat)...",searchUrl:l("user.sekolah.index","/sekolah"),resetUrl:l("user.sekolah.index","/sekolah"),defaultValue:s?.search||""})}),e.jsx(o,{className:"mb-6","data-aos":"fade-up","data-aos-delay":"150",children:e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[h&&h.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Kecamatan:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.kecamatan||"",onChange:a=>{const t=a.target.value||null;m.get(l("user.sekolah.index","/sekolah"),{...s,kecamatan:t,kelurahan:null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Kecamatan"}),h.map(a=>e.jsx("option",{value:a.id,children:a.nm_kecamatan},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Kelurahan:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.kelurahan||"",onChange:a=>{m.get(l("user.sekolah.index","/sekolah"),{...s,kelurahan:a.target.value||null},{preserveState:!0})},disabled:s?.kecamatan&&n.length===0,children:[e.jsx("option",{value:"",children:s?.kecamatan?n.length===0?"Tidak ada kelurahan":"Semua Kelurahan":"Pilih Kecamatan terlebih dahulu"}),n&&n.length>0?n.map(a=>e.jsx("option",{value:a.id,children:a.nm_kelurahan},a.id)):s?.kecamatan?null:r?.map(a=>e.jsxs("option",{value:a.id,children:[a.nm_kelurahan," - ",a.kecamatan?.nm_kecamatan]},a.id))]}),s?.kecamatan&&n.length===0&&e.jsx("p",{className:"mt-1 text-xs text-base-content/60",children:"Tidak ada kelurahan di kecamatan ini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text mb-2 block",children:"Filter Akreditasi:"}),e.jsxs("select",{className:"select select-bordered w-full",value:s?.akreditasi||"",onChange:a=>{m.get(l("user.sekolah.index","/sekolah"),{...s,akreditasi:a.target.value||null},{preserveState:!0})},children:[e.jsx("option",{value:"",children:"Semua Akreditasi"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"Belum",children:"Belum"})]})]})]})})}),e.jsxs(o,{className:"mb-6","data-aos":"fade-up","data-aos-delay":"200",children:[e.jsx(f,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),"Peta Lokasi Sekolah"]})}),e.jsx(x,{children:d&&d.length>0?e.jsxs(e.Fragment,{children:[e.jsx(_,{sekolahs:d,height:"500px"}),e.jsxs("p",{className:"mt-2 text-xs text-base-content/60",children:[e.jsx("span",{className:"mr-1 inline-block h-3 w-3 rounded-full bg-blue-500"}),"Menampilkan ",d.length," sekolah di peta. Klik marker untuk melihat informasi sekolah."]})]}):e.jsx("div",{className:"flex h-[500px] items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:s?.search||s?.kecamatan||s?.kelurahan||s?.akreditasi?"Tidak ada sekolah yang sesuai dengan filter.":"Belum ada data sekolah dengan koordinat."})]})})})]}),i.data.length===0?e.jsx(o,{"data-aos":"fade-up","data-aos-delay":"250",children:e.jsx(x,{children:e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(g,{className:"mx-auto h-12 w-12 text-base-content/30"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:s?.search||s?.kecamatan||s?.kelurahan||s?.akreditasi?"Tidak ada sekolah yang ditemukan.":"Belum ada data sekolah."})]})})}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.data.map((a,t)=>e.jsx(o,{"data-aos":"fade-up","data-aos-delay":250+t*50,children:e.jsxs(x,{children:[a.foto_utama&&e.jsx("div",{className:"mb-4 overflow-hidden rounded-lg",children:e.jsx("img",{src:`/storage/${a.foto_utama}`,alt:a.nm_sekolah,className:"h-48 w-full object-cover transition-transform hover:scale-105"})}),e.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[e.jsx("h3",{className:"text-lg font-bold",children:a.nm_sekolah}),b(a.akreditasi)]}),e.jsxs("div",{className:"space-y-2 text-sm text-base-content/70",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{className:"font-mono",children:a.npsn})]}),a.kelurahan&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsxs("span",{children:[a.kelurahan.nm_kelurahan,a.kelurahan.kecamatan&&`, ${a.kelurahan.kecamatan.nm_kecamatan}`]})]}),a.no_telp&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:a.no_telp})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:a.email})]}),a.website&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:a.website})]}),a.thn_berdiri&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsxs("span",{children:["Berdiri: ",a.thn_berdiri]})]}),a.akreditasi&&a.akreditasi!=="Belum"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsxs("span",{children:["Akreditasi: ",a.akreditasi]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(p,{href:l("user.sekolah.show",`/sekolah/${a.id}`),className:"btn btn-primary btn-sm w-full",children:"Lihat Detail"})})]})},a.id))}),i.links.length>3&&e.jsx("div",{className:"mt-6 flex justify-center","data-aos":"fade-up",children:e.jsx("div",{className:"join",children:i.links.map((a,t)=>e.jsx(p,{href:a.url||"#",className:`btn join-item btn-sm ${a.active?"btn-active":a.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:a.label}},t))})})]})]})}export{q as default};
